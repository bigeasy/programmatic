require('../proof')(1, function (dump, equal) {
    var fs = require('fs'), path = require('path'), programmatic = require('../..')
    var escodegen = require('escodegen')

    var body = fs.readFileSync(path.join(__dirname, 'fixtures', 'static.p.js'), 'utf8')
    var result = programmatic.generate(body).shift()
    var source = escodegen.generate(result, { format: { semicolons: false } })
    fs.writeFileSync(path.join(__dirname, 'generators', 'static.js'), source, 'utf8')
    console.log(source)
    var generators = require('./generators/static')
    console.log(dump(generators.static()))
    var source = escodegen.generate(generators.static(), { format: { semicolons: false } })
    console.log(source)
    fs.writeFileSync(path.join(__dirname, 'generated', 'static.js'), source, 'utf8')
    var generated = require('./generated/static')
    equal(generated(0), 1, 'generated')
})
